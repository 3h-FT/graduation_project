<%= content_for :title, "ユーザーページ" %>

<div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-lg">
  <h2 class="text-center text-3xl font-semibold text-yellow-600 mb-8">
    <%= current_user.username %> さんのページ
  </h2>

  <h3 class="mt-6 text-center text-6xl font-semibold text-gray-700 mb-4">
  これまでに知ったワードの合計: <span class="text-pink-500"><%= @known_word_count %></span> 個
  </h3>

  <%= render 'search', q: @q %>

  <div class="mt-6 bg-green-50 py-4 px-4 rounded-xl shadow">
  <%= render 'new' %>

<% if @custom_words.present? %>
    <h3 class="text-center text-2xl sm:text-3xl font-semibold text-green-600 py-4">
     カスタムワード: <span class="text-pink-500"><%= @custom_words.count %></span> 個
    </h3>
    <ul class="space-y-2 text-lg text-gray-700">
    <% @custom_words.each do |word| %>
      <li class="py-3 px-6 bg-white text-2xl text-gray-800 rounded-full shadow-sm font-semibold leading-relaxed hover:bg-yellow-100 transition-all flex items-center justify-between gap-x-3">
        <div class="flex items-center gap-x-3">
          <span class="text-green-600">●</span>
          <%= word.word %>
        </div>
        <%= button_to userpage_path(word), method: :delete, form: { data: { turbo: false } }, class: "text-red-600 hover:text-red-800" do %>
          <i class="bi bi-trash-fill"></i>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>
  </div>

  <% if @favorited_words.present? %>
    <div class="mt-6 bg-yellow-50 py-4 px-4 rounded-xl shadow">
      <h3 class="text-center text-2xl sm:text-3xl font-semibold text-yellow-600 py-4">
        お気に入り登録: <span class="text-pink-500"><%= @favorited_words.count %></span> 個
      </h3>
      <div class="space-y-2">
        <%= render partial: 'ai_messages/result', collection: @favorited_words, as: :positive_word, locals: { show_header_and_button: false, favorited_word_ids: @favorited_word_ids } %>
      </div>
    </div>
  <% else %>
    <p class="text-center text-lg text-gray-600 py-8">
      お気に入り登録はありません
    </p>
  <% end %>

  <div class="mt-8 space-y-4">
    <%= link_to "トップページに戻る", root_path, class: 'block text-center text-lg font-semibold text-blue-500 hover:text-blue-700 hover:underline' %>
    <%= link_to "ポジティブワードを作ろう", new_ai_message_path, class: 'block text-center text-lg font-semibold text-blue-500 hover:text-blue-700 hover:underline' %>

    <div class="flex justify-center space-x-4 mt-6">
      <%= link_to "アカウントを編集する", edit_user_registration_path, class: 'text-sm sm:text-base font-medium text-white bg-indigo-500 hover:bg-indigo-600 px-6 py-3 rounded-full shadow-md' %>
      <%= button_to "ログアウト", destroy_user_session_path, method: :delete, class: 'text-sm font-medium text-white bg-red-500 hover:bg-red-600 px-6 py-3 rounded-full shadow-md' %>
    </div>
  </div>
</div>
